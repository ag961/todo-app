(this["webpackJsonptodo-manager"]=this["webpackJsonptodo-manager"]||[]).push([[0],{201:function(e,t){},203:function(e,t){},217:function(e,t){},219:function(e,t){},247:function(e,t){},249:function(e,t){},250:function(e,t){},255:function(e,t){},257:function(e,t){},263:function(e,t){},265:function(e,t){},284:function(e,t){},296:function(e,t){},299:function(e,t){},334:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(179),r=n.n(i),o=n(11),s=n(1),l=a.a.createContext();function u(e){var t=null===JSON.parse(localStorage.getItem("todo-settings"))?{displayCompleted:!0,itemsPerPage:3}:JSON.parse(localStorage.getItem("todo-settings")),n=Object(c.useState)(t.displayCompleted),a=Object(o.a)(n,2),i=a[0],r=a[1],u=Object(c.useState)(t.itemsPerPage||3),d=Object(o.a)(u,2),j=d[0],O=d[1];Object(c.useEffect)((function(){var e={displayCompleted:i,itemsPerPage:j};localStorage.setItem("todo-settings",JSON.stringify(e))}));var b={displayCompleted:i,itemsPerPage:j,setDisplayCompleted:r,setItemsPerPage:O};return Object(s.jsx)(l.Provider,{value:b,children:e.children})}var d=n(40),j=n(27),O=n.n(j),b=(n(197),n(107)),p=n.n(b),h=n(35),f=n.n(h),x=n(182),v=n.n(x),m=a.a.createContext();function g(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(null),l=Object(o.a)(r,2),u=l[0],j=l[1],b=Object(c.useState)({username:"",token:"",capabilities:[]}),h=Object(o.a)(b,2),x=h[0],g=h[1];function S(){_(!1,{},null)}function C(){return(C=Object(d.a)(O.a.mark((function e(t){var n,c,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=v.a.encode("".concat(t.username,":").concat(t.password)),c={headers:{authorization:"Basic ".concat(n)}},e.next=5,f.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER,"/signin"),c);case 5:a=e.sent,_(!0,i=a.data,i.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),403===e.t0.response.status?(S(),window.alert("Invalid Credentials")):console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function E(){return E=Object(d.a)(O.a.mark((function e(t){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{authorization:"Bearer ".concat(t)}},e.next=4,f.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER,"/verify"),n);case 4:c=e.sent,_(!0,a=c.data,a.token),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),S(),window.alert("token verification failed");case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),E.apply(this,arguments)}function _(e,t,n){p.a.save("auth",n),j(n),g(t),i(e)}Object(c.useEffect)((function(){var e=new URLSearchParams(window.location.search),t=p.a.load("auth");!function(e){E.apply(this,arguments)}(e.get("token")||t||null)}),[]);var T={loggedIn:a,token:u,login:function(e){return C.apply(this,arguments)},logout:S,can:function(e){var t;return null===x||void 0===x||null===(t=x.capabilities)||void 0===t?void 0:t.includes(e)},capabilities:x.capabilities};return Object(s.jsx)(m.Provider,{value:T,children:e.children})}n(334);var S=n(4),C=n(36),E=n(375),_=n(59);function T(){var e=Object(c.useContext)(m),t=Object(c.useState)({}),n=Object(o.a)(t,2),a=n[0],i=n[1],r=function(e){i((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(S.a)({},e.target.name,e.target.value))}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_.a,{condition:e.loggedIn,children:Object(s.jsx)(E.a,{color:"success",variant:"contained",onClick:e.logout,children:"Log Out"})}),Object(s.jsx)(_.a,{condition:!e.loggedIn,children:Object(s.jsxs)("form",{onSubmit:function(t){t&&t.preventDefault(),e.login(a)},children:[Object(s.jsx)("input",{onChange:r,name:"username",placeholder:"username"})," ",Object(s.jsx)("input",{onChange:r,name:"password",placefolder:"password"})," ",Object(s.jsx)(E.a,{color:"success",variant:"contained",type:"submit",children:"LOG IN"})]})})]})}var P=function(){return Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:"Header"}),Object(s.jsx)(T,{})]})},R=n(16),y=(n(337),n(377)),D=n(376),A=function(e){var t=Object(c.useState)({}),n=Object(o.a)(t,2),a=n[0],i=n[1];return{handleChange:function(e){i((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(S.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(Object(C.a)(Object(C.a)({},a),{},{difficulty:t.target.difficulty.value})),i((function(e){return{text:e.text,assignee:e.assignee}}))},values:a}};function N(e){var t=Object(c.useContext)(m),n=t.loggedIn,a=t.can(e.capability);return Object(s.jsx)(_.a,{condition:n&&a,children:e.children})}var I=n(371),w=n(370),k=n(367);n(338);function H(e){var t=e.list,n=e.toggleComplete,a=e.deleteItem,i=Object(c.useContext)(l),r=Object(c.useContext)(m).capabilities,u=i.itemsPerPage,d=Object(c.useState)(0),j=Object(o.a)(d,2),O=j[0],b=j[1],p=Object(c.useState)([]),h=Object(o.a)(p,2),f=h[0],x=h[1],v=Object(c.useState)([]),g=Object(o.a)(v,2),S=g[0],C=g[1],_=Object(c.useState)(1),T=Object(o.a)(_,2),P=T[0],R=T[1];function y(e){for(var n=[],c=0;c<t.length/u;c++)n.push(c+1);C(n);var a=t.slice(O,O+u);0===a.length&&t.length&&A(O-u),"startover"===e&&A(0),x(a)}function A(e){b(e),R(e/u+1)}return Object(c.useEffect)((function(){y("stay")}),[t,O]),Object(c.useEffect)((function(){b(0),y("startover")}),[u]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"results",children:f.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"item-delete",children:[Object(s.jsx)("h3",{children:e.text}),Object(s.jsx)(N,{capability:"delete",children:Object(s.jsx)(E.a,{color:"error",size:"small",onClick:function(){return a(e.id)},children:"X"})})]}),Object(s.jsxs)("p",{children:["Assigned to: ",e.assignee]}),Object(s.jsx)("p",{children:Object(s.jsxs)("small",{children:["Difficulty: ",e.difficulty]})}),Object(s.jsxs)(E.a,{disabled:!r.includes("update"),variant:"outlined",onClick:function(){return n(e.id)},children:["Complete: ",e.complete.toString()]}),Object(s.jsx)("hr",{})]},t)}))}),Object(s.jsx)(D.a,{alignSelf:"center",children:0===t.length?"":Object(s.jsx)(k.a,{spacing:2,children:Object(s.jsx)(w.a,{sx:{margin:"auto"},count:S.length,page:P,onChange:function(e,t){A((t-1)*u)}})})})]})}n(339);function K(e){var t=e.handleSubmit,n=e.handleChange;return Object(s.jsx)(y.a,{children:Object(s.jsx)(D.a,{p:2,children:Object(s.jsxs)("form",{className:"input-form",onSubmit:t,children:[Object(s.jsx)("h2",{children:"Add To Do Item"}),Object(s.jsx)("div",{children:Object(s.jsxs)("label",{children:[Object(s.jsx)("p",{children:"To Do Item"}),Object(s.jsx)("input",{onChange:n,name:"text",type:"text",placeholder:"Item Details"})]})}),Object(s.jsx)("div",{children:Object(s.jsxs)("label",{children:[Object(s.jsx)("p",{children:"Assigned To"}),Object(s.jsx)("input",{onChange:n,name:"assignee",type:"text",placeholder:"Assignee Name"})]})}),Object(s.jsx)("div",{children:Object(s.jsxs)("label",{children:[Object(s.jsx)("p",{children:"Difficulty"}),Object(s.jsx)("input",{onChange:n,defaultValue:3,type:"range",min:1,max:5,name:"difficulty"})]})}),Object(s.jsx)("div",{children:Object(s.jsx)(E.a,{type:"submit",variant:"outlined",children:"Add Item"})})]})})})}var W=n(373),L=n(372);function F(){var e=Object(c.useContext)(l);return Object(s.jsx)(W.a,{label:"Show Completed",control:Object(s.jsx)(L.a,{checked:e.displayCompleted,onChange:function(){e.setDisplayCompleted(!e.displayCompleted)},inputProps:{"aria-label":"controlled"}})})}var B=n(378);function U(){var e=Object(c.useContext)(l);function t(t){e.setItemsPerPage(Number(t.target.value))}return Object(s.jsx)(W.a,{label:"Items Per Page",control:Object(s.jsx)(B.a,{color:"primary","aria-label":"outlined primary button group",children:[3,5,7,10].map((function(n,c){return Object(s.jsx)(D.a,{m:1,children:Object(s.jsx)(E.a,{variant:n==e.itemsPerPage?"outlined":"contained",onClick:t,value:n,children:n})},c)}))})})}var V=n(379);function z(){return Object(s.jsx)(D.a,{sx:{width:"fit-content"},children:Object(s.jsx)(y.a,{children:Object(s.jsx)(D.a,{p:2,children:Object(s.jsxs)(V.a,{children:[Object(s.jsx)(F,{}),Object(s.jsx)(U,{})]})})})})}var J=function(){var e=Object(c.useContext)(l),t=Object(c.useContext)(m).token,n=Object(c.useState)([]),a=Object(o.a)(n,2),i=a[0],r=a[1],u=Object(c.useState)([]),j=Object(o.a)(u,2),b=j[0],p=j[1],h=A((function(e){return g.apply(this,arguments)})),x=h.handleChange,v=h.handleSubmit;function g(){return(g=Object(d.a)(O.a.mark((function e(n){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=Object(I.a)(),n.complete=!1,r([].concat(Object(R.a)(i),[n])),c={headers:{authorization:"Bearer ".concat(t)}},e.next=6,f.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER,"/todo"),n,c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(d.a)(O.a.mark((function e(n){var c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.filter((function(e){return e.id!==n})),r(c),a={headers:{authorization:"Bearer ".concat(t)}},e.next=5,f.a.delete("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER,"/todo/").concat(n),a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=i.filter((function(e){return!e.complete})).length;p(e)}),[i]),Object(c.useEffect)((function(){document.title="To Do List: ".concat(b)}),[b]),Object(c.useEffect)(Object(d.a)(O.a.mark((function e(){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,n={headers:{authorization:"Bearer ".concat(t)}},e.next=5,f.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER,"/todo"),n);case 5:c=e.sent,a=c.data.sort((function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0})),r(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),[]),Object(s.jsxs)("div",{className:"main-box",children:[Object(s.jsxs)("h1",{className:"list-heading",children:["To Do List: ",b," items pending"]}),Object(s.jsxs)("div",{className:"todo-box",children:[Object(s.jsxs)("div",{className:"input-settings",children:[Object(s.jsx)(z,{}),Object(s.jsx)(N,{capability:"create",children:Object(s.jsx)(K,{handleSubmit:v,handleChange:x})})]}),Object(s.jsx)("div",{className:"my-list",children:Object(s.jsx)(y.a,{children:Object(s.jsx)(D.a,{p:2,children:Object(s.jsx)(H,{list:e.displayCompleted?i:i.filter((function(e){return!e.complete})),toggleComplete:function(e){var n=i.map((function(n){n.id===e&&(n.complete=!n.complete);var c={headers:{authorization:"Bearer ".concat(t)}};return f.a.put("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER,"/todo"),n,c),n}));r(n)},deleteItem:function(e){return S.apply(this,arguments)}})})})})]})]})};function G(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(u,{children:Object(s.jsxs)(g,{children:[Object(s.jsx)(P,{}),Object(s.jsx)(N,{capability:"read",children:Object(s.jsx)(J,{})})]})})})}function X(){return Object(s.jsx)(G,{})}var q=document.getElementById("root");r.a.render(Object(s.jsx)(X,{}),q)}},[[340,1,2]]]);
//# sourceMappingURL=main.55da8c67.chunk.js.map